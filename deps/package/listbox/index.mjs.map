{"version":3,"file":"/Users/mwistrand/projects/dojo/widgets/src/listbox/index.ts","sourceRoot":"","sources":["../node_modules/tslint-loader/index.js??ref--4!/Users/mwistrand/projects/dojo/widgets/node_modules/@dojo/webpack-contrib/css-module-dts-loader/index.js?type=ts&instanceName=0_custom-elements!/Users/mwistrand/projects/dojo/widgets/src/listbox/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { reference } from '@dojo/framework/widget-core/diff';\nimport { diffProperty } from '@dojo/framework/widget-core/decorators/diffProperty';\nimport Dimensions from '@dojo/framework/widget-core/meta/Dimensions';\nimport { DNode } from '@dojo/framework/widget-core/interfaces';\nimport { CustomAriaProperties } from '../common/interfaces';\nimport { formatAriaProperties, Keys } from '../common/util';\nimport MetaBase from '@dojo/framework/widget-core/meta/Base';\nimport { ThemedMixin, ThemedProperties, theme } from '@dojo/framework/widget-core/mixins/Themed';\nimport { FocusMixin, FocusProperties } from '@dojo/framework/widget-core/mixins/Focus';\nimport { uuid } from '@dojo/framework/core/util';\nimport { v, w } from '@dojo/framework/widget-core/d';\nimport { WidgetBase } from '@dojo/framework/widget-core/WidgetBase';\n\nimport * as css from '../theme/listbox.m.css';\nimport ListboxOption from './ListboxOption';\nimport { Focus } from '@dojo/framework/widget-core/meta/Focus';\nimport Resize from '@dojo/framework/widget-core/meta/Resize';\nimport { customElement } from '@dojo/framework/widget-core/decorators/customElement';\n\n/* Default scroll meta */\nexport class ScrollMeta extends MetaBase {\n\tpublic scroll(key: string | number, amount: number): void {\n\t\tconst node = this.getNode(key);\n\t\tif (node) {\n\t\t\tnode.scrollTop = amount;\n\t\t}\n\t}\n}\n\n/**\n * @type ListboxProperties\n *\n * Properties that can be set on a Listbox component\n *\n * @property activeIndex          Index of the currently active listbox option\n * @property getOptionLabel       Function to return string label based on option data\n * @property getOptionDisabled    Function that accepts option data and returns a boolean for disabled/not disabled\n * @property getOptionId          Function that accepts option data and returns a string ID\n * @property getOptionSelected    Function that accepts option data and returns a boolean for selected/unselected\n * @property widgetId               Optional custom id for the root node of the listbox\n * @property focus                Indicates if the listbox needs focusing\n * @property multiselect          Adds currect semantics for a multiselect listbox\n * @property optionData           Array of data for listbox options\n * @property tabIndex             Listbox is in the focus order by default, but setting tabIndex: -1 will remove it\n * @property visualFocus          When controlling Listbox through an outside widget, e.g. in ComboBox, visualFocus mimics visual focus styling when true\n * @property onActiveIndexChange  Called with the index of the new requested active descendant\n * @property onOptionSelect       Called with the option data of the new requested selected item\n */\n\nexport interface ListboxProperties extends ThemedProperties, FocusProperties, CustomAriaProperties {\n\tactiveIndex?: number;\n\tgetOptionDisabled?(option: any, index: number): boolean;\n\tgetOptionId?(option: any, index: number): string;\n\tgetOptionLabel?(option: any, index: number): DNode;\n\tgetOptionSelected?(option: any, index: number): boolean;\n\twidgetId?: string;\n\tmultiselect?: boolean;\n\toptionData?: any[];\n\ttabIndex?: number;\n\tvisualFocus?: boolean;\n\tonActiveIndexChange?(index: number, key?: string | number): void;\n\tonKeyDown?(event: KeyboardEvent, key?: string | number): void;\n\tonOptionSelect?(option: any, index: number, key?: string | number): void;\n}\n\n@theme(css)\n@diffProperty('optionData', reference)\n@customElement<ListboxProperties>({\n\ttag: 'dojo-listbox',\n\tproperties: [\n\t\t'theme',\n\t\t'classes',\n\t\t'activeIndex',\n\t\t'multiselect',\n\t\t'tabIndex',\n\t\t'visualFocus',\n\t\t'optionData',\n\t\t'getOptionDisabled',\n\t\t'getOptionId',\n\t\t'getOptionLabel',\n\t\t'getOptionSelected'\n\t],\n\tattributes: ['widgetId'],\n\tevents: ['onActiveIndexChange', 'onKeyDown', 'onOptionSelect']\n})\nexport class Listbox extends ThemedMixin(FocusMixin(WidgetBase))<ListboxProperties> {\n\tprivate _boundRenderOption = this.renderOption.bind(this);\n\tprivate _idBase = uuid();\n\n\tprivate _getOptionDisabled(option: any, index: number) {\n\t\tconst { getOptionDisabled } = this.properties;\n\t\treturn getOptionDisabled ? getOptionDisabled(option, index) : false;\n\t}\n\n\tprivate _getOptionId(index: number): string {\n\t\tconst { optionData = [], getOptionId } = this.properties;\n\t\treturn getOptionId ? getOptionId(optionData[index], index) : `${this._idBase}-${index}`;\n\t}\n\n\tprivate _onKeyDown(event: KeyboardEvent) {\n\t\tevent.stopPropagation();\n\t\tconst {\n\t\t\tactiveIndex = 0,\n\t\t\tkey,\n\t\t\toptionData = [],\n\t\t\tonActiveIndexChange,\n\t\t\tonOptionSelect,\n\t\t\tonKeyDown\n\t\t} = this.properties;\n\n\t\tonKeyDown && onKeyDown(event, key);\n\n\t\tconst activeItem = optionData[activeIndex];\n\t\tlet newIndex: number;\n\n\t\tswitch (event.which) {\n\t\t\tcase Keys.Enter:\n\t\t\tcase Keys.Space:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif (!this._getOptionDisabled(activeItem, activeIndex)) {\n\t\t\t\t\tonOptionSelect && onOptionSelect(activeItem, activeIndex, key);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase Keys.Down:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tnewIndex = (activeIndex + 1) % optionData.length;\n\t\t\t\tonActiveIndexChange && onActiveIndexChange(newIndex, key);\n\t\t\t\tbreak;\n\t\t\tcase Keys.Up:\n\t\t\t\tevent.preventDefault();\n\t\t\t\tnewIndex = (activeIndex - 1 + optionData.length) % optionData.length;\n\t\t\t\tonActiveIndexChange && onActiveIndexChange(newIndex, key);\n\t\t\t\tbreak;\n\t\t\tcase Keys.Home:\n\t\t\tcase Keys.PageUp:\n\t\t\t\tonActiveIndexChange && onActiveIndexChange(0, key);\n\t\t\t\tbreak;\n\t\t\tcase Keys.End:\n\t\t\tcase Keys.PageDown:\n\t\t\t\tonActiveIndexChange && onActiveIndexChange(optionData.length - 1, key);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate _onOptionClick(option: any, index: number, key?: string | number) {\n\t\tconst { onActiveIndexChange, onOptionSelect } = this.properties;\n\t\tif (!this._getOptionDisabled(option, index)) {\n\t\t\tonActiveIndexChange && onActiveIndexChange(index, key);\n\t\t\tonOptionSelect && onOptionSelect(option, index, key);\n\t\t}\n\t}\n\n\tprotected animateScroll(scrollValue: number) {\n\t\tthis.meta(ScrollMeta).scroll('root', scrollValue);\n\t}\n\n\tprivate _calculateScroll() {\n\t\tconst { activeIndex = 0 } = this.properties;\n\t\tconst menuDimensions = this.meta(Dimensions).get('root');\n\t\tconst scrollOffset = menuDimensions.scroll.top;\n\t\tconst menuHeight = menuDimensions.offset.height;\n\t\tconst optionOffset = this.meta(Dimensions).get(this._getOptionId(activeIndex)).offset;\n\n\t\tif (optionOffset.top - scrollOffset < 0) {\n\t\t\tthis.animateScroll(optionOffset.top);\n\t\t} else if (optionOffset.top + optionOffset.height > scrollOffset + menuHeight) {\n\t\t\tthis.animateScroll(optionOffset.top + optionOffset.height - menuHeight);\n\t\t}\n\t}\n\n\tprotected getModifierClasses() {\n\t\tconst { visualFocus } = this.properties;\n\t\tconst focus = this.meta(Focus).get('root');\n\t\treturn [visualFocus || focus.containsFocus ? css.focused : null];\n\t}\n\n\tprotected getOptionClasses(active: boolean, disabled: boolean, selected: boolean) {\n\t\treturn [\n\t\t\tcss.option,\n\t\t\tactive ? css.activeOption : null,\n\t\t\tdisabled ? css.disabledOption : null,\n\t\t\tselected ? css.selectedOption : null\n\t\t];\n\t}\n\n\tprotected renderOptionLabel(option: any, index: number): DNode {\n\t\tconst { getOptionLabel } = this.properties;\n\t\treturn getOptionLabel ? getOptionLabel(option, index) : `${option}`;\n\t}\n\n\tprotected renderOption(option: any, index: number): DNode {\n\t\tconst { activeIndex = 0, getOptionSelected, theme, classes } = this.properties;\n\n\t\tconst disabled = this._getOptionDisabled(option, index);\n\t\tconst selected = getOptionSelected ? getOptionSelected(option, index) : false;\n\n\t\treturn v('div', { key: this._getOptionId(index), role: 'presentation' }, [\n\t\t\tw(ListboxOption, {\n\t\t\t\tactive: activeIndex === index,\n\t\t\t\tcss: this.getOptionClasses(activeIndex === index, disabled, selected),\n\t\t\t\tclasses,\n\t\t\t\tdisabled,\n\t\t\t\tlabel: this.renderOptionLabel(option, index),\n\t\t\t\tid: this._getOptionId(index),\n\t\t\t\tindex: index,\n\t\t\t\tkey: `option-${index}`,\n\t\t\t\toption,\n\t\t\t\tselected,\n\t\t\t\ttheme,\n\t\t\t\tonClick: this._onOptionClick\n\t\t\t})\n\t\t]);\n\t}\n\n\tprotected renderOptions(): DNode[] {\n\t\tconst { optionData = [] } = this.properties;\n\n\t\treturn optionData.map(this._boundRenderOption);\n\t}\n\n\tprotected render(): DNode {\n\t\tconst {\n\t\t\tactiveIndex = 0,\n\t\t\taria = {},\n\t\t\twidgetId,\n\t\t\tmultiselect = false,\n\t\t\ttabIndex = 0\n\t\t} = this.properties;\n\t\tconst themeClasses = this.getModifierClasses();\n\n\t\tthis.meta(Resize).get('root');\n\t\tthis._calculateScroll();\n\n\t\treturn v(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\t...formatAriaProperties(aria),\n\t\t\t\t'aria-activedescendant': this._getOptionId(activeIndex),\n\t\t\t\t'aria-multiselectable': multiselect ? 'true' : null,\n\t\t\t\tclasses: this.theme([css.root, ...themeClasses]),\n\t\t\t\tid: widgetId,\n\t\t\t\tfocus: this.shouldFocus,\n\t\t\t\tkey: 'root',\n\t\t\t\trole: 'listbox',\n\t\t\t\ttabIndex,\n\t\t\t\tonkeydown: this._onKeyDown\n\t\t\t},\n\t\t\tthis.renderOptions()\n\t\t);\n\t}\n}\n\nexport default Listbox;\n"]}