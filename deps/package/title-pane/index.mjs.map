{"version":3,"file":"/Users/mwistrand/projects/dojo/widgets/src/title-pane/index.ts","sourceRoot":"","sources":["../node_modules/tslint-loader/index.js??ref--4!/Users/mwistrand/projects/dojo/widgets/node_modules/@dojo/webpack-contrib/css-module-dts-loader/index.js?type=ts&instanceName=0_custom-elements!/Users/mwistrand/projects/dojo/widgets/src/title-pane/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { uuid } from '@dojo/framework/core/util';\nimport { DNode } from '@dojo/framework/widget-core/interfaces';\nimport { theme, ThemedMixin, ThemedProperties } from '@dojo/framework/widget-core/mixins/Themed';\nimport { FocusMixin, FocusProperties } from '@dojo/framework/widget-core/mixins/Focus';\nimport { v, w } from '@dojo/framework/widget-core/d';\nimport { WidgetBase } from '@dojo/framework/widget-core/WidgetBase';\n\nimport Icon from '../icon/index';\nimport * as fixedCss from './styles/title-pane.m.css';\nimport * as css from '../theme/title-pane.m.css';\nimport { Dimensions } from '@dojo/framework/widget-core/meta/Dimensions';\nimport { customElement } from '@dojo/framework/widget-core/decorators/customElement';\nimport GlobalEvent from '../global-event/index';\n\n/**\n * @type TitlePaneProperties\n *\n * Properties that can be set on a TitlePane component\n *\n * @property closeable          If false the pane will not collapse in response to clicking the title\n * @property headingLevel       'aria-level' for the title's DOM node\n * @property onRequestClose     Called when the title of an open pane is clicked\n * @property onRequestOpen      Called when the title of a closed pane is clicked\n * @property open               If true the pane is opened and content is visible\n * @property title              Title to display above the content\n */\nexport interface TitlePaneProperties extends ThemedProperties, FocusProperties {\n\tcloseable?: boolean;\n\theadingLevel?: number;\n\tonRequestClose?(key: string | number | undefined): void;\n\tonRequestOpen?(key: string | number | undefined): void;\n\topen?: boolean;\n\ttitle: string;\n}\n\n@theme(css)\n@customElement<TitlePaneProperties>({\n\ttag: 'dojo-title-pane',\n\tproperties: ['theme', 'classes', 'extraClasses', 'open', 'closeable', 'headingLevel'],\n\tattributes: ['title', 'key'],\n\tevents: ['onRequestClose', 'onRequestOpen']\n})\nexport class TitlePane extends ThemedMixin(FocusMixin(WidgetBase))<TitlePaneProperties> {\n\tprivate _id = uuid();\n\tprivate _open: boolean | undefined;\n\n\tprivate _onWindowResize = () => {\n\t\tthis.invalidate();\n\t};\n\n\tprivate _onTitleClick(event: MouseEvent) {\n\t\tevent.stopPropagation();\n\t\tthis._toggle();\n\t}\n\n\tprivate _toggle() {\n\t\tconst {\n\t\t\tcloseable = true,\n\t\t\tkey,\n\t\t\tonRequestClose,\n\t\t\tonRequestOpen,\n\t\t\topen = true\n\t\t} = this.properties;\n\n\t\tif (!closeable) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (open) {\n\t\t\tonRequestClose && onRequestClose(key);\n\t\t} else {\n\t\t\tonRequestOpen && onRequestOpen(key);\n\t\t}\n\t}\n\n\tprotected getButtonContent(): DNode {\n\t\treturn this.properties.title;\n\t}\n\n\tprotected getFixedModifierClasses(): (string | null)[] {\n\t\tconst { closeable = true } = this.properties;\n\t\treturn [closeable ? fixedCss.closeableFixed : null];\n\t}\n\n\tprotected getModifierClasses(): (string | null)[] {\n\t\tconst { closeable = true } = this.properties;\n\t\treturn [closeable ? css.closeable : null];\n\t}\n\n\tprotected getPaneContent(): DNode[] {\n\t\treturn this.children;\n\t}\n\n\tprotected renderExpandIcon(): DNode {\n\t\tconst { open = true, theme, classes } = this.properties;\n\t\treturn v('span', { classes: this.theme(css.arrow) }, [\n\t\t\tw(Icon, { type: open ? 'downIcon' : 'rightIcon', theme, classes })\n\t\t]);\n\t}\n\n\tprotected getPaneStyles(): any {\n\t\tconst { open = true } = this.properties;\n\t\tconst contentDimensions = this.meta(Dimensions).get('content');\n\t\treturn { marginTop: open ? '0px' : `-${contentDimensions.offset.height}px` };\n\t}\n\n\tprotected render(): DNode {\n\t\tconst { closeable = true, headingLevel, open = true } = this.properties;\n\n\t\tlet transition = false;\n\n\t\tif (open !== this._open) {\n\t\t\ttransition = true;\n\t\t\tthis._open = open;\n\t\t}\n\n\t\treturn v(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\tclasses: [...this.theme([css.root, open ? css.open : null]), fixedCss.rootFixed]\n\t\t\t},\n\t\t\t[\n\t\t\t\tw(GlobalEvent, { key: 'global', window: { resize: this._onWindowResize } }),\n\t\t\t\tv(\n\t\t\t\t\t'div',\n\t\t\t\t\t{\n\t\t\t\t\t\t'aria-level': headingLevel ? `${headingLevel}` : null,\n\t\t\t\t\t\tclasses: [\n\t\t\t\t\t\t\t...this.theme([css.title, ...this.getModifierClasses()]),\n\t\t\t\t\t\t\tfixedCss.titleFixed,\n\t\t\t\t\t\t\t...this.getFixedModifierClasses()\n\t\t\t\t\t\t],\n\t\t\t\t\t\trole: 'heading'\n\t\t\t\t\t},\n\t\t\t\t\t[\n\t\t\t\t\t\tv(\n\t\t\t\t\t\t\t'button',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'aria-controls': `${this._id}-content`,\n\t\t\t\t\t\t\t\t'aria-expanded': `${open}`,\n\t\t\t\t\t\t\t\tdisabled: !closeable,\n\t\t\t\t\t\t\t\tclasses: [\n\t\t\t\t\t\t\t\t\tfixedCss.titleButtonFixed,\n\t\t\t\t\t\t\t\t\t...this.theme([css.titleButton])\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tfocus: this.shouldFocus,\n\t\t\t\t\t\t\t\tid: `${this._id}-title`,\n\t\t\t\t\t\t\t\ttype: 'button',\n\t\t\t\t\t\t\t\tonclick: this._onTitleClick\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t[this.renderExpandIcon(), this.getButtonContent()]\n\t\t\t\t\t\t)\n\t\t\t\t\t]\n\t\t\t\t),\n\t\t\t\tv(\n\t\t\t\t\t'div',\n\t\t\t\t\t{\n\t\t\t\t\t\t'aria-hidden': open ? null : 'true',\n\t\t\t\t\t\t'aria-labelledby': `${this._id}-title`,\n\t\t\t\t\t\tclasses: [\n\t\t\t\t\t\t\t...this.theme([css.content, transition ? css.contentTransition : null]),\n\t\t\t\t\t\t\tfixedCss.contentFixed\n\t\t\t\t\t\t],\n\t\t\t\t\t\tid: `${this._id}-content`,\n\t\t\t\t\t\tkey: 'content',\n\t\t\t\t\t\tstyles: this.getPaneStyles()\n\t\t\t\t\t},\n\t\t\t\t\tthis.getPaneContent()\n\t\t\t\t)\n\t\t\t]\n\t\t);\n\t}\n}\n\nexport default TitlePane;\n"]}