{"version":3,"file":"/Users/mwistrand/projects/dojo/widgets/src/tab-controller/TabButton.ts","sourceRoot":"","sources":["../node_modules/tslint-loader/index.js??ref--4!/Users/mwistrand/projects/dojo/widgets/node_modules/@dojo/webpack-contrib/css-module-dts-loader/index.js?type=ts&instanceName=0_custom-elements!/Users/mwistrand/projects/dojo/widgets/src/tab-controller/TabButton.ts"],"names":[],"mappings":"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","sourcesContent":["import { DNode } from '@dojo/framework/widget-core/interfaces';\nimport { I18nMixin } from '@dojo/framework/widget-core/mixins/I18n';\nimport { ThemedMixin, ThemedProperties, theme } from '@dojo/framework/widget-core/mixins/Themed';\nimport { FocusMixin, FocusProperties } from '@dojo/framework/widget-core/mixins/Focus';\nimport { v } from '@dojo/framework/widget-core/d';\nimport { WidgetBase } from '@dojo/framework/widget-core/WidgetBase';\nimport commonBundle from '../common/nls/common';\nimport { CommonMessages } from '../common/interfaces';\nimport { Keys } from '../common/util';\n\nimport * as css from '../theme/tab-controller.m.css';\n\n/**\n * @type TabButtonProperties\n *\n * Properties that can be set on a TabButton component\n *\n * @property active             Determines whether this tab button is active\n * @property closeable          Determines whether this tab can be closed\n * @property controls           ID of the DOM element this tab button controls\n * @property disabled           Determines whether this tab can become active\n * @property id                 ID of this tab button DOM element\n * @property index              The position of this tab button\n * @property onClick            Called when this tab button is clicked\n * @property onCloseClick       Called when this tab button's close icon is clicked\n * @property onDownArrowPress   Called when the down arrow button is pressed\n * @property onEndPress         Called when the end button is pressed\n * @property onHomePress        Called when the home button is pressed\n * @property onLeftArrowPress   Called when the left arrow button is pressed\n * @property onRightArrowPress  Called when the right arrow button is pressed\n * @property onUpArrowPress     Called when the up arrow button is pressed\n */\nexport interface TabButtonProperties extends ThemedProperties, FocusProperties {\n\tactive?: boolean;\n\tcloseable?: boolean;\n\tcontrols: string;\n\tdisabled?: boolean;\n\tid: string;\n\tindex: number;\n\tonClick?: (index: number) => void;\n\tonCloseClick?: (index: number) => void;\n\tonDownArrowPress?: () => void;\n\tonEndPress?: () => void;\n\tonHomePress?: () => void;\n\tonLeftArrowPress?: () => void;\n\tonRightArrowPress?: () => void;\n\tonUpArrowPress?: () => void;\n}\n\nexport const ThemedBase = I18nMixin(ThemedMixin(FocusMixin(WidgetBase)));\n\n@theme(css)\nexport class TabButtonBase<P extends TabButtonProperties = TabButtonProperties> extends ThemedBase<\n\tP\n> {\n\tprivate _onClick(event: MouseEvent) {\n\t\tevent.stopPropagation();\n\t\tconst { disabled, index, onClick } = this.properties;\n\n\t\t!disabled && onClick && onClick(index);\n\t}\n\n\tprivate _onCloseClick(event: MouseEvent) {\n\t\tevent.stopPropagation();\n\t\tconst { index, onCloseClick } = this.properties;\n\n\t\tonCloseClick && onCloseClick(index);\n\t}\n\n\tprivate _onKeyDown(event: KeyboardEvent) {\n\t\tevent.stopPropagation();\n\t\tconst {\n\t\t\tcloseable,\n\t\t\tdisabled,\n\t\t\tindex,\n\t\t\tonCloseClick,\n\t\t\tonDownArrowPress,\n\t\t\tonEndPress,\n\t\t\tonHomePress,\n\t\t\tonLeftArrowPress,\n\t\t\tonRightArrowPress,\n\t\t\tonUpArrowPress\n\t\t} = this.properties;\n\n\t\tif (disabled) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Accessibility\n\t\tswitch (event.which) {\n\t\t\t// Escape\n\t\t\tcase Keys.Escape:\n\t\t\t\tcloseable && onCloseClick && onCloseClick(index);\n\t\t\t\tbreak;\n\t\t\t// Left arrow\n\t\t\tcase Keys.Left:\n\t\t\t\tonLeftArrowPress && onLeftArrowPress();\n\t\t\t\tbreak;\n\t\t\t// Right arrow\n\t\t\tcase Keys.Right:\n\t\t\t\tonRightArrowPress && onRightArrowPress();\n\t\t\t\tbreak;\n\t\t\t// Up arrow\n\t\t\tcase Keys.Up:\n\t\t\t\tonUpArrowPress && onUpArrowPress();\n\t\t\t\tbreak;\n\t\t\t// Down arrow\n\t\t\tcase Keys.Down:\n\t\t\t\tonDownArrowPress && onDownArrowPress();\n\t\t\t\tbreak;\n\t\t\t// Home\n\t\t\tcase Keys.Home:\n\t\t\t\tonHomePress && onHomePress();\n\t\t\t\tbreak;\n\t\t\t// End\n\t\t\tcase Keys.End:\n\t\t\t\tonEndPress && onEndPress();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprotected getContent(messages: CommonMessages): DNode[] {\n\t\tconst { active, closeable } = this.properties;\n\n\t\treturn [\n\t\t\t...this.children,\n\t\t\tcloseable\n\t\t\t\t? v(\n\t\t\t\t\t\t'button',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttabIndex: active ? 0 : -1,\n\t\t\t\t\t\t\tclasses: this.theme(css.close),\n\t\t\t\t\t\t\ttype: 'button',\n\t\t\t\t\t\t\tonclick: this._onCloseClick\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[messages.close]\n\t\t\t\t  )\n\t\t\t\t: null\n\t\t];\n\t}\n\n\tprotected getModifierClasses(): (string | null)[] {\n\t\tconst { active, closeable, disabled } = this.properties;\n\t\treturn [\n\t\t\tactive ? css.activeTabButton : null,\n\t\t\tcloseable ? css.closeable : null,\n\t\t\tdisabled ? css.disabledTabButton : null\n\t\t];\n\t}\n\n\trender(): DNode {\n\t\tconst { active, controls, disabled, id } = this.properties;\n\t\tconst { messages } = this.localizeBundle(commonBundle);\n\n\t\treturn v(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\t'aria-controls': controls,\n\t\t\t\t'aria-disabled': disabled ? 'true' : 'false',\n\t\t\t\t'aria-selected': active === true ? 'true' : 'false',\n\t\t\t\tclasses: this.theme([css.tabButton, ...this.getModifierClasses()]),\n\t\t\t\tfocus: this.shouldFocus,\n\t\t\t\tid,\n\t\t\t\tkey: 'tab-button',\n\t\t\t\tonclick: this._onClick,\n\t\t\t\tonkeydown: this._onKeyDown,\n\t\t\t\trole: 'tab',\n\t\t\t\ttabIndex: active === true ? 0 : -1\n\t\t\t},\n\t\t\tthis.getContent(messages)\n\t\t);\n\t}\n}\n\nexport default class TabButton extends TabButtonBase<TabButtonProperties> {}\n"]}