{"version":3,"file":"/Users/mwistrand/projects/dojo/widgets/src/toolbar/index.ts","sourceRoot":"","sources":["../node_modules/tslint-loader/index.js??ref--4!/Users/mwistrand/projects/dojo/widgets/node_modules/@dojo/webpack-contrib/css-module-dts-loader/index.js?type=ts&instanceName=0_custom-elements!/Users/mwistrand/projects/dojo/widgets/src/toolbar/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { Dimensions } from '@dojo/framework/widget-core/meta/Dimensions';\nimport { DNode } from '@dojo/framework/widget-core/interfaces';\nimport { I18nMixin } from '@dojo/framework/widget-core/mixins/I18n';\nimport { ThemedMixin, theme, ThemedProperties } from '@dojo/framework/widget-core/mixins/Themed';\nimport { v, w } from '@dojo/framework/widget-core/d';\nimport { WidgetBase } from '@dojo/framework/widget-core/WidgetBase';\n\nimport Icon from '../icon/index';\nimport SlidePane, { Align } from '../slide-pane/index';\nimport commonBundle from '../common/nls/common';\nimport * as fixedCss from './styles/toolbar.m.css';\nimport * as css from '../theme/toolbar.m.css';\nimport { GlobalEvent } from '../global-event/index';\nimport { customElement } from '@dojo/framework/widget-core/decorators/customElement';\n\nexport { Align };\n\n/**\n * @type ToolbarProperties\n *\n * Properties that can be set on a Toolbar component\n *\n * @property collapseWidth     Width at which to collapse actions into a SlidePane\n * @property onCollapse        Called when action items change their layout\n * @property heading           The toolbar heading\n */\nexport interface ToolbarProperties extends ThemedProperties {\n\talign?: Align;\n\tcollapseWidth?: number;\n\tonCollapse?(collapsed: boolean): void;\n\theading?: string;\n}\n\n@theme(css)\n@customElement<ToolbarProperties>({\n\ttag: 'dojo-toolbar',\n\tproperties: ['theme', 'classes', 'extraClasses', 'collapseWidth'],\n\tattributes: ['key', 'heading'],\n\tevents: ['onCollapse']\n})\nexport class Toolbar extends I18nMixin(ThemedMixin(WidgetBase))<ToolbarProperties> {\n\tprivate _collapsed = false;\n\tprivate _open = false;\n\n\tprivate _closeMenu() {\n\t\tthis._open = false;\n\t\tthis.invalidate();\n\t}\n\n\tprivate _collapseIfNecessary = () => {\n\t\tconst { collapseWidth = 800, onCollapse } = this.properties;\n\t\tconst { width } = this.meta(Dimensions).get('root').size;\n\n\t\tif (width > collapseWidth && this._collapsed === true) {\n\t\t\tthis._collapsed = false;\n\t\t\tonCollapse && onCollapse(this._collapsed);\n\t\t\tthis.invalidate();\n\t\t} else if (width <= collapseWidth && this._collapsed === false) {\n\t\t\tthis._collapsed = true;\n\t\t\tonCollapse && onCollapse(this._collapsed);\n\t\t\tthis.invalidate();\n\t\t}\n\t};\n\n\tprivate _toggleMenu(event: MouseEvent) {\n\t\tevent.stopPropagation();\n\t\tthis._open = !this._open;\n\t\tthis.invalidate();\n\t}\n\n\tprotected onAttach() {\n\t\tthis._collapseIfNecessary();\n\t}\n\n\tprotected renderActions(): DNode {\n\t\tconst { close } = this.localizeBundle(commonBundle).messages;\n\n\t\tconst { align = Align.right, theme, classes, heading } = this.properties;\n\t\tconst actions = v(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\tclasses: this.theme(css.actions),\n\t\t\t\tkey: 'menu'\n\t\t\t},\n\t\t\tthis.children\n\t\t);\n\n\t\treturn this._collapsed\n\t\t\t? w(\n\t\t\t\t\tSlidePane,\n\t\t\t\t\t{\n\t\t\t\t\t\talign,\n\t\t\t\t\t\tcloseText: close,\n\t\t\t\t\t\tkey: 'slide-pane-menu',\n\t\t\t\t\t\tonRequestClose: this._closeMenu,\n\t\t\t\t\t\topen: this._open,\n\t\t\t\t\t\ttheme,\n\t\t\t\t\t\tclasses,\n\t\t\t\t\t\ttitle: heading\n\t\t\t\t\t},\n\t\t\t\t\t[actions]\n\t\t\t  )\n\t\t\t: actions;\n\t}\n\n\tprotected renderButton(): DNode {\n\t\tconst { open } = this.localizeBundle(commonBundle).messages;\n\t\tconst { theme, classes } = this.properties;\n\n\t\treturn v(\n\t\t\t'button',\n\t\t\t{\n\t\t\t\tclasses: this.theme(css.menuButton),\n\t\t\t\ttype: 'button',\n\t\t\t\tonclick: this._toggleMenu\n\t\t\t},\n\t\t\t[open, w(Icon, { type: 'barsIcon', theme, classes })]\n\t\t);\n\t}\n\n\tprotected render(): DNode {\n\t\tconst { heading } = this.properties;\n\n\t\tconst hasActions = this.children && this.children.length;\n\n\t\treturn v(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\tkey: 'root',\n\t\t\t\tclasses: [\n\t\t\t\t\tfixedCss.rootFixed,\n\t\t\t\t\t...this.theme([css.root, this._collapsed ? css.collapsed : null])\n\t\t\t\t]\n\t\t\t},\n\t\t\t[\n\t\t\t\tw(GlobalEvent, { key: 'global', window: { resize: this._collapseIfNecessary } }),\n\t\t\t\theading\n\t\t\t\t\t? v(\n\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tclasses: this.theme(css.title)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t[heading]\n\t\t\t\t\t  )\n\t\t\t\t\t: null,\n\t\t\t\thasActions ? this.renderActions() : null,\n\t\t\t\thasActions && this._collapsed ? this.renderButton() : null\n\t\t\t]\n\t\t);\n\t}\n}\n\nexport default Toolbar;\n"]}